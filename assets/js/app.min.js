jQuery(document).ready((function(t){t("body").on("click",".notif-button",(function(e){e.preventDefault(),e.stopPropagation(),t(".block-connecter-dropdown").removeClass("show"),t(".notif-button").not(t(this)).next().removeClass("show"),t(".block-connecter-dropdown").removeClass("show"),t(".notif-button").removeClass("active"),t(this).toggleClass("active"),t(this).next().toggleClass("show")})),t(document).click((function(e){e.stopPropagation(),0===t(".notif-item").has(e.target).length&&(t(".notif-button").removeClass("active"),t(".notif-dropdown").removeClass("show")),t(".block-connecter-dropdown").hasClass("show")&&t(".block-connecter-dropdown").removeClass("show"),t(".sort-dropdown").is(":visible")&&t(".sort-dropdown").fadeOut(),t(".dropdown-menu-filter").is(":visible")&&t(".dropdown-menu-filter").fadeOut()})),t("body").on("click",".action-sort-link",(function(e){e.preventDefault(),e.stopPropagation(),t(this).next().fadeToggle()})),t(".pdf-block-container iframe").on("load",(function(){let e=t(".pdf-block-container iframe").contents().find(".sdk-HeaderView-header");t(e).append("<style>.sdk-HeaderView-header{background-color: #525252;}</style>")})),t("body").on("click",".btn-add-tool",(function(e){e.preventDefault(),t(this).toggleClass("active"),t(this).parents(".vignette-item").toggleClass("vignette-tool-box")})),t("body").on("click",".btn-lu",(function(e){e.preventDefault(),t(this).toggleClass("active"),t(this).parents(".notif-dropdown-item").toggleClass("lu")})),t("body").on("click",".btn-filter-tag",(function(e){e.preventDefault(),t(".btn-filter-tag").not(t(this)).removeClass("active"),t(this).toggleClass("active")})),t(".detail-autre").find("table").wrap("<div class='tableBlock'></div>"),t(".detail-autre").find("table").addClass("table-standard"),t(".detail-autre").find("video").wrap("<div class='videoBlock'></div>"),t(".videoBlock").append("<a href='' class='btn btn-start-video'><i class='ico-play'></i></a>"),t(".detail-autre").find("video").addClass("video-standard"),t("html, body").on("click",".link-condition",(function(e){e.preventDefault();var o=t(this).attr("href");t("html, body").stop().animate({scrollTop:t(o).offset().top},2500,"easeInOutExpo"),t(".tab-promotions .tab-promotions-nav li:last").hasClass("disabled")?t(".tab-promotions .tab-promotions-nav li:first a").trigger("click"):t(".tab-promotions .tab-promotions-nav li:last a").trigger("click")}))})),jQuery(document).ready((function(t){t(".tabs-stage .tab-content").hide(),t("body").on("click",".tabs-step-one-nav a",(function(e){e.preventDefault(),t(".tabs-step-one-nav li").removeClass("tab-active"),t(".tabs-nv3-block.rubrique-content").html(""),t(this).parent().addClass("tab-active"),t(".tabs-stage div").hide(),t(t(this).attr("href")).show(),t(".btn-choice-2").removeClass("active"),t(".search-advanced-block-bottom").hide()})),t(".tabs-nv3-stage .tab-nv3-content").hide(),t(".tabs-nv3-stage .tab-nv3-content").first().show(),t(".tabs-nv3-nav li:first").addClass("tab-active"),t("body").on("click",".tabs-nv3-nav a",(function(e){e.preventDefault(),t(".tabs-nv3-nav li").removeClass("tab-active"),t(this).parent().addClass("tab-active"),t(".tabs-nv3-stage .tab-nv3-content").hide(),t(t(this).attr("href")).show()})),t("body").on("click",".btn-choice-2",(function(e){e.preventDefault(),t(".btn-choice-2").removeClass("active"),t(this).addClass("active"),t(".search-advanced-block-bottom").show()})),t("body").on("click",".btn-search-nv4",(function(e){e.preventDefault(),t(this).parents(".el-nv4-item-top").next().toggleClass("show")})),t(".tabsP-stage .tab-content").hide(),t(".tabsP-stage .tab-content").first().show(),t(".tab-promotions .tab-promotions-nav li:first").addClass("tab-active"),t(".tab-offres .tab-promotions-nav li:first").addClass("tab-active"),t("body").on("click",".tab-promotions .tab-promotions-nav a",(function(e){e.preventDefault(),t(".tab-promotions .tab-promotions-nav li").removeClass("tab-active"),t(this).parent().addClass("tab-active"),t(".tabsP-stage .tab-content").hide(),t(t(this).attr("href")).show()})),t("html, body").on("click",".btn-desc-complete",(function(e){e.preventDefault();var o=t(this).attr("href");t("html, body").stop().animate({scrollTop:t(o).offset().top},2500,"easeInOutExpo"),t(".tab-promotions .tab-promotions-nav li:first a").trigger("click")})),t("body").on("click",".tabs-langue .btn-white",(function(){t(".accordion-standard .accordion-item").find(".accordion-faq-header").removeClass("active").next().slideUp(300)})),t(".tabsPr-stage .tab-content").hide(),t(".tabsPr-stage .tab-content").first().show(),t(".tab-notifications .tab-promotions-nav li:first").addClass("tab-active"),t("body").on("click",".tab-notifications .tab-promotions-nav a",(function(e){e.preventDefault(),t(".tab-notifications .tab-promotions-nav li").removeClass("tab-active"),t(this).parent().addClass("tab-active"),t(".tabsPr-stage .tab-content").hide(),t(t(this).attr("href")).show()})),t(".tabsOutil-stage .tab-content").hide(),t(".tabsOutil-stage .tab-content").first().show(),t(".tab-outils .tab-promotions-nav li:first").addClass("tab-active"),t("body").on("click",".tab-outils .tab-promotions-nav a",(function(e){e.preventDefault(),t(".tab-outils .tab-promotions-nav li").removeClass("tab-active"),t(this).parent().addClass("tab-active"),t(".tabsOutil-stage .tab-content").hide(),t(t(this).attr("href")).show()}))})),jQuery(document).ready((function(t){t("body").on("click",".accordion-faq .accordion-faq-header",(function(e){e.stopPropagation(),t(this).toggleClass("active").next().slideToggle(300),t(this).find(".ico-arrow-simple").toggleClass("rotate180")})),t("body").on("click",".accordion-faq .ico-arrow-simple",(function(e){e.stopPropagation(),t(this).parents(".accordion-faq-header").toggleClass("active").next().slideToggle(300),t(this).toggleClass("rotate180")})),t("body").on("click",".accordion-standard .accordion-faq-header",(function(e){e.stopPropagation(),t(this).toggleClass("active").next().slideToggle(300)})),t("body").on("click",".accordion-standard .ico-arrow-simple",(function(e){e.stopPropagation(),t(this).parents(".accordion-faq-header").toggleClass("active").next().slideToggle(300)}))})),jQuery(document).ready((function(t){t("body").on("keyup",".el-nv4-item-search-block .input-forms",(function(){let e=t(this).val().toLowerCase();t(this).parents(".el-nv4-item-search-block").next().find(".el-nv4-subitem").each((function(){let o=t(this).find(".el-nv4-sub-title").html().toLowerCase();o.startsWith(e)||o.includes(e)?t(this).fadeIn(400):t(this).fadeOut(400)}))})),t("body").on("keyup",".filter-custom input",(function(){let e=t(this).val().toLowerCase();t(this).parents(".filter-custom").next().find(".item").each((function(){let o=t(this).find("h4").html().toLowerCase();o.startsWith(e)||o.includes(e)?t(this).fadeIn(400):t(this).fadeOut(400)}))})),t("body").on("keyup",".tab-content-filter .el-nv4-item-search-block .input-forms",(function(){let e=t(this).val().toLowerCase();t(this).parents(".tab-content-filter").next().find(".el-nv4-subitem").each((function(){let o=t(this).find("h4").html().toLowerCase();o.startsWith(e)||o.includes(e)?t(this).fadeIn(400):t(this).fadeOut(400)}))}))})),jQuery(document).ready((function(t){var e=t(".slider-img").owlCarousel({mouseDrag:!1,autoplay:!1,margin:0,autoWidth:!1,autoHeight:!0,slideTransition:"cubic-bezier(0.215, 0.61, 0.355, 1)",autoplayTimeout:4e3,autoplaySpeed:700,autoplayHoverPause:!0,responsiveClass:!0,dots:!1,responsive:{1024:{items:3},1441:{items:5}}});t("body").on("click",".slider-img .slider-item",(function(){let e=t(this).find("img").attr("src");t(".view-block-img").find("img").attr("src",e)})),t(".btnNav-next").click((function(){e.trigger("next.owl.carousel")})),t(".btnNav-prev").click((function(){e.trigger("prev.owl.carousel",[300])}));var o=t(".alert-slider").owlCarousel({mouseDrag:!0,autoplay:!1,margin:0,nav:!0,animateIn:"fadeInRight",animateOut:"fadeOutLeft",navContainer:".navCustom",navText:[t(".nv-prev"),t(".nv-next")],autoWidth:!0,autoHeight:!0,items:1,slideTransition:"cubic-bezier(0.215, 0.61, 0.355, 1)",autoplayTimeout:4e3,autoplayHoverPause:!0,dots:!1});t(".nv-prev").click((function(t){t.preventDefault(),o.trigger("next.owl.carousel")})),1===t(".slider-img").find(".owl-item").length?t(".slider-img-container").hide():t(".slider-img").find(".owl-item").length>1&&t(".slider-img").find(".owl-item").length<6&&(window.matchMedia("(max-width: 1440px)").matches?t(".button-block").show():t(".button-block").hide()),t(window).resize((function(){window.matchMedia("(max-width: 1440px)").matches?1===t(".slider-img").find(".owl-item").length?t(".slider-img-container").hide():t(".slider-img").find(".owl-item").length>1&&t(".slider-img").find(".owl-item").length<6&&t(".button-block").show():1===t(".slider-img").find(".owl-item").length?t(".slider-img-container").hide():t(".slider-img").find(".owl-item").length>1&&t(".slider-img").find(".owl-item").length<6&&t(".button-block").hide()})),t(".nv-next").click((function(t){t.preventDefault(),o.trigger("prev.owl.carousel",[300])}))})),jQuery(document).ready((function(t){t("body").on("click",".btn-filter",(function(e){e.preventDefault(),e.stopPropagation(),t(".dropdown-menu-filter").not(t(this).next()).fadeOut(200),t(this).next().fadeToggle(200)}))}));var lockDeleteFavoris=!1;jQuery(document).ready((function(t){t("body").on("click",".vignette-item .btn-delete-favoris",(function(e){e.preventDefault();let o=t(this).data("delete");!0===t("#btn-add-tool-"+o).hasClass("active")?(t(".poppin-annulation-favoris-tool").fadeIn(400),t("body").on("click",".poppin-annulation-favoris-tool",(function(){t.ajax({method:"POST",url:settings.ajaxUrl,async:!0,data:{action:"bdc_delete_favoris",delete_id:o},dataType:"json",cache:!1,success:function(e){var o=e.length>5?"+":"",n=e.length>5?"Afficher tout":"";e.length<1&&(t(".notif-button-favoris").html(""),t(".notif-button-favoris").html('<i class="icon ico-heart"></i>')),t(".notif-number-favoris").html(e.length+o),t(".notif-number-plus").html("("+e.length+o+")"),t(".link-all-notif-favoris").html(n),location.reload()},error:function(t){}})}))):(t(".poppin-annulation-favoris").fadeIn(400),t(".btn-success-delete").on("click",(function(){t(".notif-number-favoris").html(""),t(".notif-number-plus").html(""),t(".link-all-notif-favoris").html(""),t.ajax({method:"POST",url:settings.ajaxUrl,async:!0,data:{action:"bdc_delete_favoris",delete_id:o},dataType:"json",cache:!1,success:function(e){console.log(e.length);var o=e.length>5?"+":"",n=e.length>5?"Afficher tout":"";e.length<1&&(t(".notif-button-favoris").html(""),t(".notif-button-favoris").html('<i class="icon ico-heart"></i>')),t(".notif-number-favoris").html(e.length+o),t(".notif-number-plus").html("("+e.length+o+")"),t(".link-all-notif-favoris").html(n),location.reload()},error:function(t){}})})),t(".btn-annuler-delete").on("click",(function(){return""})))})),t("body").on("click",".button-close",(function(){t(this).parents(".poppin-overlay").fadeOut(400)})),t("body").on("click",".btn-annuler",(function(){t(this).parents(".poppin-overlay").fadeOut(400)})),t("body").on("click",".poppin-overlay",(function(){t(this).fadeOut(400)}))})),jQuery(document).ready((function(t){t(".video-standard").length>0&&(t(".video-standard").get(0).pause(),t(".video-standard").attr("controls",!0)),t("body").on("click",".btn-start-video",(function(e){e.preventDefault(),t(this).fadeToggle(100),t(this).parents(".videoBlock").find(".video-standard").trigger("play")})),t(".video-standard").length>0&&t(".video-standard").bind("play",(function(e){t(this).siblings().fadeOut(200)})),t(".video-standard").length>0&&t(".video-standard").bind("pause",(function(e){t(this).siblings().fadeIn(200)}))}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiXSwibmFtZXMiOlsialF1ZXJ5IiwiZG9jdW1lbnQiLCJyZWFkeSIsIiQiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInJlbW92ZUNsYXNzIiwibm90IiwidGhpcyIsIm5leHQiLCJ0b2dnbGVDbGFzcyIsImNsaWNrIiwiaGFzIiwidGFyZ2V0IiwibGVuZ3RoIiwiaGFzQ2xhc3MiLCJpcyIsImZhZGVPdXQiLCJmYWRlVG9nZ2xlIiwiaGVhZCIsImNvbnRlbnRzIiwiZmluZCIsImFwcGVuZCIsInBhcmVudHMiLCJ3cmFwIiwiYWRkQ2xhc3MiLCJhdHRyIiwic3RvcCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJ0b3AiLCJ0cmlnZ2VyIiwiaGlkZSIsImV2ZW50IiwiaHRtbCIsInBhcmVudCIsInNob3ciLCJmaXJzdCIsInNsaWRlVXAiLCJzbGlkZVRvZ2dsZSIsInZhbFRvVGVzdCIsInZhbCIsInRvTG93ZXJDYXNlIiwiZWFjaCIsInRpdGxlSXRlbSIsInN0YXJ0c1dpdGgiLCJpbmNsdWRlcyIsImZhZGVJbiIsIm93bCIsIm93bENhcm91c2VsIiwibW91c2VEcmFnIiwiYXV0b3BsYXkiLCJtYXJnaW4iLCJhdXRvV2lkdGgiLCJhdXRvSGVpZ2h0Iiwic2xpZGVUcmFuc2l0aW9uIiwiYXV0b3BsYXlUaW1lb3V0IiwiYXV0b3BsYXlTcGVlZCIsImF1dG9wbGF5SG92ZXJQYXVzZSIsInJlc3BvbnNpdmVDbGFzcyIsImRvdHMiLCJyZXNwb25zaXZlIiwiMTAyNCIsIml0ZW1zIiwiMTQ0MSIsInVybEltYWdlIiwib3dsMiIsIm5hdiIsImFuaW1hdGVJbiIsImFuaW1hdGVPdXQiLCJuYXZDb250YWluZXIiLCJuYXZUZXh0Iiwid2luZG93IiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJyZXNpemUiLCJsb2NrRGVsZXRlRmF2b3JpcyIsImRlbGV0ZUlkIiwiZGF0YSIsImFqYXgiLCJtZXRob2QiLCJ1cmwiLCJzZXR0aW5ncyIsImFqYXhVcmwiLCJhc3luYyIsImFjdGlvbiIsImRlbGV0ZV9pZCIsImRhdGFUeXBlIiwiY2FjaGUiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJwbHVzMiIsImFsbDIiLCJsb2NhdGlvbiIsInJlbG9hZCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImdldCIsInBhdXNlIiwiYmluZCIsInNpYmxpbmdzIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBT0MsVUFBVUMsT0FBTSxTQUFTQyxHQUU1QkEsRUFBRSxRQUFRQyxHQUFHLFFBQVEsaUJBQWdCLFNBQVNDLEdBQzFDQSxFQUFFQyxpQkFDRkQsRUFBRUUsa0JBQ0ZKLEVBQUUsNkJBQTZCSyxZQUFZLFFBQzNDTCxFQUFFLGlCQUFpQk0sSUFBSU4sRUFBRU8sT0FBT0MsT0FBT0gsWUFBWSxRQUNuREwsRUFBRSw2QkFBNkJLLFlBQVksUUFDM0NMLEVBQUUsaUJBQWlCSyxZQUFZLFVBQy9CTCxFQUFFTyxNQUFNRSxZQUFZLFVBQ3BCVCxFQUFFTyxNQUFNQyxPQUFPQyxZQUFZLFdBVy9CVCxFQUFFRixVQUFVWSxPQUFNLFNBQVNSLEdBQ3ZCQSxFQUFFRSxrQkFJcUMsSUFIdkJKLEVBQUUsZUFHSlcsSUFBSVQsRUFBRVUsUUFBUUMsU0FDeEJiLEVBQUUsaUJBQWlCSyxZQUFZLFVBQy9CTCxFQUFFLG1CQUFtQkssWUFBWSxTQUdsQ0wsRUFBRSw2QkFBNkJjLFNBQVMsU0FDdkNkLEVBQUUsNkJBQTZCSyxZQUFZLFFBRzVDTCxFQUFFLGtCQUFrQmUsR0FBRyxhQUN0QmYsRUFBRSxrQkFBa0JnQixVQUdyQmhCLEVBQUUseUJBQXlCZSxHQUFHLGFBQzdCZixFQUFFLHlCQUF5QmdCLGFBS25DaEIsRUFBRSxRQUFRQyxHQUFHLFFBQVEscUJBQW9CLFNBQVNDLEdBQzlDQSxFQUFFQyxpQkFDRkQsRUFBRUUsa0JBQ0ZKLEVBQUVPLE1BQU1DLE9BQU9TLGdCQUluQmpCLEVBQUUsK0JBQStCQyxHQUFHLFFBQVEsV0FDeEMsSUFBSWlCLEVBQU9sQixFQUFF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RSxtQkFBbUJrRyxJQUFJLEdBQUdDLFFBQzVCbkcsRUFBRSxtQkFBbUJ5QixLQUFLLFlBQVcsSUFLekN6QixFQUFFLFFBQVFDLEdBQUcsUUFBUSxvQkFBbUIsU0FBU0MsR0FDN0NBLEVBQUVDLGlCQUNGSCxFQUFFTyxNQUFNVSxXQUFXLEtBQ25CakIsRUFBRU8sTUFBTWUsUUFBUSxlQUFlRixLQUFLLG1CQUFtQlcsUUFBUSxXQUk5RC9CLEVBQUUsbUJBQW1CYSxPQUFTLEdBQy9CYixFQUFFLG1CQUFtQm9HLEtBQUssUUFBUSxTQUFVbEcsR0FDeENGLEVBQUVPLE1BQU04RixXQUFXckYsUUFBUSxRQU05QmhCLEVBQUUsbUJBQW1CYSxPQUFTLEdBQy9CYixFQUFFLG1CQUFtQm9HLEtBQUssU0FBUyxTQUFVbEcsR0FDekNGLEVBQUVPLE1BQU04RixXQUFXdEQsT0FBTyIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsialF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigkKXtcclxuICAgIC8qRHJvcGRvd24gYWxlcnQqL1xyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsJy5ub3RpZi1idXR0b24nLGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICQoJy5ibG9jay1jb25uZWN0ZXItZHJvcGRvd24nKS5yZW1vdmVDbGFzcygnc2hvdycpO1xyXG4gICAgICAgICQoJy5ub3RpZi1idXR0b24nKS5ub3QoJCh0aGlzKSkubmV4dCgpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XHJcbiAgICAgICAgJCgnLmJsb2NrLWNvbm5lY3Rlci1kcm9wZG93bicpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XHJcbiAgICAgICAgJCgnLm5vdGlmLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLm5leHQoKS50b2dnbGVDbGFzcygnc2hvdycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAvKiAvISpNZW51IGNvbm5lY3RlciBkcm9wZG93biohL1xyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsJy5saW5rLWFjdGlvbicsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgJCgnLm5vdGlmLWRyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5ibG9jay1jb25uZWN0ZXItdG9wJykubmV4dCgpLnRvZ2dsZUNsYXNzKCdzaG93Jyk7XHJcbiAgICB9KTsqL1xyXG5cclxuICAgICQoZG9jdW1lbnQpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHZhciBjb250YWluZXIgPSAkKFwiLm5vdGlmLWl0ZW1cIik7XHJcbiAgICBcclxuICAgICAgICAvL2NoZWNrIGlmIHRoZSBjbGlja2VkIGFyZWEgaXMgZHJvcERvd24gb3Igbm90XHJcbiAgICAgICAgaWYgKGNvbnRhaW5lci5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAkKCcubm90aWYtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKCcubm90aWYtZHJvcGRvd24nKS5yZW1vdmVDbGFzcygnc2hvdycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoJCgnLmJsb2NrLWNvbm5lY3Rlci1kcm9wZG93bicpLmhhc0NsYXNzKCdzaG93Jykpe1xyXG4gICAgICAgICAgICAkKCcuYmxvY2stY29ubmVjdGVyLWRyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKCQoJy5zb3J0LWRyb3Bkb3duJykuaXMoXCI6dmlzaWJsZVwiKSl7XHJcbiAgICAgICAgICAgICQoJy5zb3J0LWRyb3Bkb3duJykuZmFkZU91dCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoJCgnLmRyb3Bkb3duLW1lbnUtZmlsdGVyJykuaXMoXCI6dmlzaWJsZVwiKSl7XHJcbiAgICAgICAgICAgICQoJy5kcm9wZG93bi1tZW51LWZpbHRlcicpLmZhZGVPdXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8qRHJvcGRvd24gc29ydCBkZXRhaWxzIGdhbW1lKi9cclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCcuYWN0aW9uLXNvcnQtbGluaycsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgJCh0aGlzKS5uZXh0KCkuZmFkZVRvZ2dsZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLypDaGFuZ2UgaGVhZGVyIGlmcmFtZSBlbWJlZCBQREYqL1xyXG4gICAgJChcIi5wZGYtYmxvY2stY29udGFpbmVyIGlmcmFtZVwiKS5vbihcImxvYWRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbGV0IGhlYWQgPSAkKFwiLnBkZi1ibG9jay1jb250YWluZXIgaWZyYW1lXCIpLmNvbnRlbnRzKCkuZmluZChcIi5zZGstSGVhZGVyVmlldy1oZWFkZXJcIik7XHJcbiAgICAgICAgbGV0IGNzcyA9ICc8c3R5bGU+LnNkay1IZWFkZXJWaWV3LWhlYWRlcntiYWNrZ3JvdW5kLWNvbG9yOiAjNTI1MjUyO308L3N0eWxlPic7XHJcbiAgICAgICAgJChoZWFkKS5hcHBlbmQoY3NzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qR2VzdGlvbiBzdGF0ZSBhY3RpdmUgaWNvbiBmYXZvcmlzIGRldGFpbHMgcHJvY8OpZHVyZS9jb250cmFjdHVlbHMvb2ZmcmUqL1xyXG4gICAgLy8gJCgnYm9keScpLm9uKCdjbGljaycsJy5idG4tYWRkLWZhdicsZnVuY3Rpb24oZSl7XHJcbiAgICAvLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsJy5idG4tYWRkLXRvb2wnLGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy52aWduZXR0ZS1pdGVtJykudG9nZ2xlQ2xhc3MoJ3ZpZ25ldHRlLXRvb2wtYm94Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyAkKCdib2R5Jykub24oJ2NsaWNrJywnLmJ0bi1zdXBwcicsZnVuY3Rpb24oZSl7XHJcbiAgICAvLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgLy8gfSk7IFxyXG5cclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCcuYnRuLWx1JyxmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubm90aWYtZHJvcGRvd24taXRlbScpLnRvZ2dsZUNsYXNzKCdsdScpO1xyXG4gICAgfSlcclxuXHJcbiAgICAvKmV2ZW50IGNsaWNrIHRhZyBsaXN0ZSBvdXRpbHMqL1xyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsJy5idG4tZmlsdGVyLXRhZycsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5idG4tZmlsdGVyLXRhZycpLm5vdCgkKHRoaXMpKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9KVxyXG5cclxuICAgIC8qQWRkIGNsYXNzIHRhYmxlIGV0IGRpdiBibG9jayB0YWJsZSBwb3VyIFdZU1NJV1dHKi9cclxuICAgICQoJy5kZXRhaWwtYXV0cmUnKS5maW5kKCd0YWJsZScpLndyYXAoXCI8ZGl2IGNsYXNzPSd0YWJsZUJsb2NrJz48L2Rpdj5cIik7XHJcbiAgICAkKCcuZGV0YWlsLWF1dHJlJykuZmluZCgndGFibGUnKS5hZGRDbGFzcygndGFibGUtc3RhbmRhcmQnKTtcclxuXHJcbiAgICAvKkFkZCBkaXYgYmxvY2sgcG91ciB2aWRlbyBkYW5zIFdZU1NXSUcqL1xyXG4gICAgJCgnLmRldGFpbC1hdXRyZScpLmZpbmQoJ3ZpZGVvJykud3JhcChcIjxkaXYgY2xhc3M9J3ZpZGVvQmxvY2snPjwvZGl2PlwiKTtcclxuICAgICQoJy52aWRlb0Jsb2NrJykuYXBwZW5kKFwiPGEgaHJlZj0nJyBjbGFzcz0nYnRuIGJ0bi1zdGFydC12aWRlbyc+PGkgY2xhc3M9J2ljby1wbGF5Jz48L2k+PC9hPlwiKTtcclxuICAgICQoJy5kZXRhaWwtYXV0cmUnKS5maW5kKCd2aWRlbycpLmFkZENsYXNzKCd2aWRlby1zdGFuZGFyZCcpO1xyXG5cclxuICAgIC8vZXZlbnQgY2xpY2sgYnRuLWRlc2MtY29tcGxldGVcclxuICAgICQoXCJodG1sLCBib2R5XCIpLm9uKFwiY2xpY2tcIiwgXCIubGluay1jb25kaXRpb25cIiwgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIC8vIGVucmVnaXN0cmUgbGEgdmFsZXVyIGRlIGwnYXR0cmlidXQgaHJlZiBkYW5zIGxhIHZhcmlhYmxlIHRhcmdldFxyXG4gICAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcclxuICAgICAgICBcclxuICAgICAgICAvKiBsZSBzw6lsZWN0ZXVyICQoaHRtbCwgYm9keSkgcGVybWV0IGRlIGNvcnJpZ2VyIHVuIGJ1ZyBzdXIgY2hyb21lIFxyXG4gICAgICAgIGV0IHNhZmFyaSAod2Via2l0KSAqL1xyXG4gICAgICAgICQoJ2h0bWwsIGJvZHknKVxyXG4gICAgICAgIC8vIG9uIGFycsOqdGUgdG91dGVzIGxlcyBhbmltYXRpb25zIGVuIGNvdXJzXHJcbiAgICAgICAgLnN0b3AoKVxyXG4gICAgICAgIC8qIG9uIGZhaXQgbWFpbnRlbmFudCBsJ2FuaW1hdGlvbiB2ZXJzIGxlIGhhdXQgKHNjcm9sbFRvcCkgdmVycyBcclxuICAgICAgICAgICAgbm90cmUgYW5jcmUgdGFyZ2V0ICovXHJcbiAgICAgICAgLmFuaW1hdGUoe3Njcm9sbFRvcDogJCh0YXJnZXQpLm9mZnNldCgpLnRvcCB9LCAyNTAwLCAnZWFzZUluT3V0RXhwbycpO1xyXG5cclxuICAgICAgICBpZighJCgnLnRhYi1wcm9tb3Rpb25zIC50YWItcHJvbW90aW9ucy1uYXYgbGk6bGFzdCcpLmhhc0NsYXNzKCdkaXNhYmxlZCcpKXsgXHJcbiAgICAgICAgICAgICQoJy50YWItcHJvbW90aW9ucyAudGFiLXByb21vdGlvbnMtbmF2IGxpOmxhc3QgYScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICQoJy50YWItcHJvbW90aW9ucyAudGFiLXByb21vdGlvbnMtbmF2IGxpOmZpcnN0IGEnKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbn0pXHJcblxyXG5cclxuXHJcblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigkKXtcclxuXHJcbiAgICAvL0NhY2hlIG9uZ2xldCBzdGVwIDIgYXByw6hzIGNoYXJnZW1lbnQgcGFnZVxyXG4gICAgJCgnLnRhYnMtc3RhZ2UgLnRhYi1jb250ZW50JykuaGlkZSgpO1xyXG4gICAgLy8gJCgnLnRhYnMtc3RhZ2UgLnRhYi1jb250ZW50OmZpcnN0Jykuc2hvdygpO1xyXG4gICAgLy8gJCgnLnRhYnMtc3RlcC1vbmUtbmF2IGxpOmZpcnN0JykuYWRkQ2xhc3MoJ3RhYi1hY3RpdmUnKTtcclxuXHJcbiAgICAvLyBDaGFuZ2UgdGFiIGNsYXNzIGFuZCBkaXNwbGF5IGNvbnRlbnQgc3RlcCAxICYgMlxyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcudGFicy1zdGVwLW9uZS1uYXYgYScsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy50YWJzLXN0ZXAtb25lLW5hdiBsaScpLnJlbW92ZUNsYXNzKCd0YWItYWN0aXZlJyk7XHJcbiAgICAgICAgJChcIi50YWJzLW52My1ibG9jay5ydWJyaXF1ZS1jb250ZW50XCIpLmh0bWwoXCJcIik7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygndGFiLWFjdGl2ZScpO1xyXG4gICAgICAgICQoJy50YWJzLXN0YWdlIGRpdicpLmhpZGUoKTtcclxuICAgICAgICAkKCQodGhpcykuYXR0cignaHJlZicpKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLmJ0bi1jaG9pY2UtMicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKCcuc2VhcmNoLWFkdmFuY2VkLWJsb2NrLWJvdHRvbScpLmhpZGUoKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAkKCcudGFicy1udjMtc3RhZ2UgLnRhYi1udjMtY29udGVudCcpLmhpZGUoKTtcclxuICAgICQoJy50YWJzLW52My1zdGFnZSAudGFiLW52My1jb250ZW50JykuZmlyc3QoKS5zaG93KCk7XHJcbiAgICAkKCcudGFicy1udjMtbmF2IGxpOmZpcnN0JykuYWRkQ2xhc3MoJ3RhYi1hY3RpdmUnKTtcclxuXHJcbiAgICAvLyBDaGFuZ2UgdGFiIGNsYXNzIGFuZCBkaXNwbGF5IGNvbnRlbnQgc3RlcCAzICYgNCBcclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLnRhYnMtbnYzLW5hdiBhJywgZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLnRhYnMtbnYzLW5hdiBsaScpLnJlbW92ZUNsYXNzKCd0YWItYWN0aXZlJyk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygndGFiLWFjdGl2ZScpO1xyXG4gICAgICAgICQoJy50YWJzLW52My1zdGFnZSAudGFiLW52My1jb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICQoJCh0aGlzKS5hdHRyKCdocmVmJykpLnNob3coKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvL0dlc3Rpb24gc3RhdGUgYWN0aXZlIGJvdXRvbiBzdGVwIDIgdGFiXHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywnLmJ0bi1jaG9pY2UtMicsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5idG4tY2hvaWNlLTInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgJCgnLnNlYXJjaC1hZHZhbmNlZC1ibG9jay1ib3R0b20nKS5zaG93KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL2V2ZW50IGNsaWNrIGJvdXRvbiByZWNoZXJjaGUgaXRlbSBuaXZlYXUgNCBcclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCcuYnRuLXNlYXJjaC1udjQnLGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5lbC1udjQtaXRlbS10b3AnKS5uZXh0KCkudG9nZ2xlQ2xhc3MoJ3Nob3cnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qVGFiIHN0YW5kYXJkIGhvbWUgcGFnZSAvIGTDqXRhaWxzIG9mZnJlICYgc2VydmljZSAqL1xyXG4gICAgJCgnLnRhYnNQLXN0YWdlIC50YWItY29udGVudCcpLmhpZGUoKTtcclxuICAgICQoJy50YWJzUC1zdGFnZSAudGFiLWNvbnRlbnQnKS5maXJzdCgpLnNob3coKTtcclxuICAgICQoJy50YWItcHJvbW90aW9ucyAudGFiLXByb21vdGlvbnMtbmF2IGxpOmZpcnN0JykuYWRkQ2xhc3MoJ3RhYi1hY3RpdmUnKTtcclxuICAgICQoJy50YWItb2ZmcmVzIC50YWItcHJvbW90aW9ucy1uYXYgbGk6Zmlyc3QnKS5hZGRDbGFzcygndGFiLWFjdGl2ZScpO1xyXG5cclxuICAgIC8vIENoYW5nZSB0YWIgY2xhc3MgYW5kIGRpc3BsYXkgY29udGVudCBzdGVwIDMgJiA0IFxyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcudGFiLXByb21vdGlvbnMgLnRhYi1wcm9tb3Rpb25zLW5hdiBhJywgZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLnRhYi1wcm9tb3Rpb25zIC50YWItcHJvbW90aW9ucy1uYXYgbGknKS5yZW1vdmVDbGFzcygndGFiLWFjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ3RhYi1hY3RpdmUnKTtcclxuICAgICAgICAkKCcudGFic1Atc3RhZ2UgLnRhYi1jb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgICQoJCh0aGlzKS5hdHRyKCdocmVmJykpLnNob3coKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvL2V2ZW50IGNsaWNrIGJ0bi1kZXNjLWNvbXBsZXRlXHJcbiAgICAkKFwiaHRtbCwgYm9keVwiKS5vbihcImNsaWNrXCIsIFwiLmJ0bi1kZXNjLWNvbXBsZXRlXCIsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAvLyBlbnJlZ2lzdHJlIGxhIHZhbGV1ciBkZSBsJ2F0dHJpYnV0IGhyZWYgZGFucyBsYSB2YXJpYWJsZSB0YXJnZXRcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLyogbGUgc8OpbGVjdGV1ciAkKGh0bWwsIGJvZHkpIHBlcm1ldCBkZSBjb3JyaWdlciB1biBidWcgc3VyIGNocm9tZSBcclxuICAgICAgICBldCBzYWZhcmkgKHdlYmtpdCkgKi9cclxuICAgICAgICAkKCdodG1sLCBib2R5JylcclxuICAgICAgICAvLyBvbiBhcnLDqnRlIHRvdXRlcyBsZXMgYW5pbWF0aW9ucyBlbiBjb3Vyc1xyXG4gICAgICAgIC5zdG9wKClcclxuICAgICAgICAvKiBvbiBmYWl0IG1haW50ZW5hbnQgbCdhbmltYXRpb24gdmVycyBsZSBoYXV0IChzY3JvbGxUb3ApIHZlcnMgXHJcbiAgICAgICAgICAgIG5vdHJlIGFuY3JlIHRhcmdldCAqL1xyXG4gICAgICAgIC5hbmltYXRlKHtzY3JvbGxUb3A6ICQodGFyZ2V0KS5vZmZzZXQoKS50b3AgfSwgMjUwMCwgJ2Vhc2VJbk91dEV4cG8nKTtcclxuXHJcbiAgICAgICAgJCgnLnRhYi1wcm9tb3Rpb25zIC50YWItcHJvbW90aW9ucy1uYXYgbGk6Zmlyc3QgYScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKmV2ZW50IGNsaWNrIGJ1dHRvbiB0YWIgdGFicy1sYW5ndWUqL1xyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsJy50YWJzLWxhbmd1ZSAuYnRuLXdoaXRlJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICQoJy5hY2NvcmRpb24tc3RhbmRhcmQgLmFjY29yZGlvbi1pdGVtJykuZmluZCgnLmFjY29yZGlvbi1mYXEtaGVhZGVyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLm5leHQoKS5zbGlkZVVwKDMwMCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLypUYWIgc3RhbmRhcmQgaGVhZGVyICovXHJcbiAgICAkKCcudGFic1ByLXN0YWdlIC50YWItY29udGVudCcpLmhpZGUoKTtcclxuICAgICQoJy50YWJzUHItc3RhZ2UgLnRhYi1jb250ZW50JykuZmlyc3QoKS5zaG93KCk7XHJcbiAgICAkKCcudGFiLW5vdGlmaWNhdGlvbnMgLnRhYi1wcm9tb3Rpb25zLW5hdiBsaTpmaXJzdCcpLmFkZENsYXNzKCd0YWItYWN0aXZlJyk7XHJcblxyXG4gICAgLy8gQ2hhbmdlIHRhYiBcclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLnRhYi1ub3RpZmljYXRpb25zIC50YWItcHJvbW90aW9ucy1uYXYgYScsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy50YWItbm90aWZpY2F0aW9ucyAudGFiLXByb21vdGlvbnMtbmF2IGxpJykucmVtb3ZlQ2xhc3MoJ3RhYi1hY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCd0YWItYWN0aXZlJyk7XHJcbiAgICAgICAgJCgnLnRhYnNQci1zdGFnZSAudGFiLWNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgkKHRoaXMpLmF0dHIoJ2hyZWYnKSkuc2hvdygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLnRhYnNPdXRpbC1zdGFnZSAudGFiLWNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAkKCcudGFic091dGlsLXN0YWdlIC50YWItY29udGVudCcpLmZpcnN0KCkuc2hvdygpO1xyXG4gICAgJCgnLnRhYi1vdXRpbHMgLnRhYi1wcm9tb3Rpb25zLW5hdiBsaTpmaXJzdCcpLmFkZENsYXNzKCd0YWItYWN0aXZlJyk7XHJcblxyXG4gICAgLy8gQ2hhbmdlIHRhYiBvdXRpbHMgY2xhc3MgYW5kIGRpc3BsYXkgY29udGVudFxyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcudGFiLW91dGlscyAudGFiLXByb21vdGlvbnMtbmF2IGEnLCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcudGFiLW91dGlscyAudGFiLXByb21vdGlvbnMtbmF2IGxpJykucmVtb3ZlQ2xhc3MoJ3RhYi1hY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCd0YWItYWN0aXZlJyk7XHJcbiAgICAgICAgJCgnLnRhYnNPdXRpbC1zdGFnZSAudGFiLWNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgkKHRoaXMpLmF0dHIoJ2hyZWYnKSkuc2hvdygpO1xyXG4gICAgfSk7XHJcbn0pO1xualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigkKXtcclxuXHJcbiAgICAvKnRvZ2dsZSBhY2NvcmRpb24gZmFxIHZpYSBmYXEgaGVhZGVyKi8gXHJcbiAgICAkKFwiYm9keVwiKS5vbihcImNsaWNrXCIsIFwiLmFjY29yZGlvbi1mYXEgLmFjY29yZGlvbi1mYXEtaGVhZGVyXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpLm5leHQoKS5zbGlkZVRvZ2dsZSgzMDApO1xyXG4gICAgICAgICQodGhpcykuZmluZCgnLmljby1hcnJvdy1zaW1wbGUnKS50b2dnbGVDbGFzcygncm90YXRlMTgwJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKnRvZ2dsZSBhY2NvcmRpb24gZmFxIHZpYSBpY29uIGZhcSBoZWFkZXIqLyBcclxuICAgICQoXCJib2R5XCIpLm9uKFwiY2xpY2tcIiwgXCIuYWNjb3JkaW9uLWZhcSAuaWNvLWFycm93LXNpbXBsZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuYWNjb3JkaW9uLWZhcS1oZWFkZXInKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKS5uZXh0KCkuc2xpZGVUb2dnbGUoMzAwKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdyb3RhdGUxODAnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qdG9nZ2xlIGFjY29yZGlvbiBzdGFuZGFyZCB2aWEgZmFxIGhlYWRlciovIFxyXG4gICAgJChcImJvZHlcIikub24oXCJjbGlja1wiLCBcIi5hY2NvcmRpb24tc3RhbmRhcmQgLmFjY29yZGlvbi1mYXEtaGVhZGVyXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpLm5leHQoKS5zbGlkZVRvZ2dsZSgzMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyp0b2dnbGUgYWNjb3JkaW9uIHN0YW5kYXJkIHZpYSBpY29uIGZhcSBoZWFkZXIqL1xyXG4gICAgJChcImJvZHlcIikub24oXCJjbGlja1wiLCBcIi5hY2NvcmRpb24tc3RhbmRhcmQgLmljby1hcnJvdy1zaW1wbGVcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmFjY29yZGlvbi1mYXEtaGVhZGVyJykudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIikubmV4dCgpLnNsaWRlVG9nZ2xlKDMwMCk7XHJcbiAgICB9KTtcclxuICAgICAgXHJcbn0pO1xyXG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCl7XHJcblxyXG4gICAgLypGaWx0cmUgc2VhcmNoIGl0ZW0gbml2ZWF1IDQqL1xyXG4gICAgJCgnYm9keScpLm9uKCdrZXl1cCcsJy5lbC1udjQtaXRlbS1zZWFyY2gtYmxvY2sgLmlucHV0LWZvcm1zJyxmdW5jdGlvbigpe1xyXG4gICAgICAgIGxldCB2YWxUb1Rlc3QgPSAkKHRoaXMpLnZhbCgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuZWwtbnY0LWl0ZW0tc2VhcmNoLWJsb2NrJykubmV4dCgpLmZpbmQoJy5lbC1udjQtc3ViaXRlbScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgbGV0IHRpdGxlSXRlbSA9ICQodGhpcykuZmluZCgnLmVsLW52NC1zdWItdGl0bGUnKS5odG1sKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgaWYodGl0bGVJdGVtLnN0YXJ0c1dpdGgodmFsVG9UZXN0KSB8fCB0aXRsZUl0ZW0uaW5jbHVkZXModmFsVG9UZXN0KSl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZhZGVJbig0MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZhZGVPdXQoNDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLypGaWx0cmUgc2VhcmNoIHByb2NlZHVyZSBkZXRhaWwgb2ZmcmUqL1xyXG4gICAgJCgnYm9keScpLm9uKCdrZXl1cCcsJy5maWx0ZXItY3VzdG9tIGlucHV0JyxmdW5jdGlvbigpe1xyXG4gICAgICAgIGxldCB2YWxUb1Rlc3QgPSAkKHRoaXMpLnZhbCgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuZmlsdGVyLWN1c3RvbScpLm5leHQoKS5maW5kKCcuaXRlbScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgbGV0IHRpdGxlSXRlbSA9ICQodGhpcykuZmluZCgnaDQnKS5odG1sKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgaWYodGl0bGVJdGVtLnN0YXJ0c1dpdGgodmFsVG9UZXN0KSB8fCB0aXRsZUl0ZW0uaW5jbHVkZXModmFsVG9UZXN0KSl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZhZGVJbig0MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZhZGVPdXQoNDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLypGaWx0cmUgc2VhcmNoIGl0ZW0gZGlzY291cnMqL1xyXG4gICAgJCgnYm9keScpLm9uKCdrZXl1cCcsJy50YWItY29udGVudC1maWx0ZXIgLmVsLW52NC1pdGVtLXNlYXJjaC1ibG9jayAuaW5wdXQtZm9ybXMnLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbGV0IHZhbFRvVGVzdCA9ICQodGhpcykudmFsKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy50YWItY29udGVudC1maWx0ZXInKS5uZXh0KCkuZmluZCgnLmVsLW52NC1zdWJpdGVtJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBsZXQgdGl0bGVJdGVtID0gJCh0aGlzKS5maW5kKCdoNCcpLmh0bWwoKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBpZih0aXRsZUl0ZW0uc3RhcnRzV2l0aCh2YWxUb1Rlc3QpIHx8IHRpdGxlSXRlbS5pbmNsdWRlcyh2YWxUb1Rlc3QpKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmFkZUluKDQwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmFkZU91dCg0MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7XG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCQpe1xyXG4gICAgXHJcbiAgICAvKkluaXRpYWxpc2F0aW9uIG93bCBjYXJvdXNlbCBpbWFnZSovXHJcbiAgICB2YXIgb3dsID0gJCgnLnNsaWRlci1pbWcnKS5vd2xDYXJvdXNlbCh7XHJcblx0XHRtb3VzZURyYWc6IGZhbHNlLFxyXG5cdFx0YXV0b3BsYXk6IGZhbHNlLFxyXG5cdFx0bWFyZ2luOiAwLFxyXG5cdFx0YXV0b1dpZHRoOmZhbHNlLFxyXG5cdFx0YXV0b0hlaWdodDp0cnVlLFxyXG5cdFx0c2xpZGVUcmFuc2l0aW9uOiAnY3ViaWMtYmV6aWVyKDAuMjE1LCAwLjYxLCAwLjM1NSwgMSknLFxyXG5cdFx0YXV0b3BsYXlUaW1lb3V0OjQwMDAsXHJcblx0XHRhdXRvcGxheVNwZWVkOjcwMCxcclxuXHRcdGF1dG9wbGF5SG92ZXJQYXVzZTp0cnVlLFxyXG4gICAgICAgIHJlc3BvbnNpdmVDbGFzczp0cnVlLFxyXG4gICAgICAgIGRvdHM6ZmFsc2UsXHJcbiAgICAgICAgcmVzcG9uc2l2ZTp7XHJcbiAgICAgICAgICAgIDEwMjQ6e1xyXG4gICAgICAgICAgICAgICAgaXRlbXM6MyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTQ0MTp7XHJcbiAgICAgICAgICAgICAgICBpdGVtczo1LFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSkgXHJcblxyXG4gICAgLypzbGlkZXItaXRlbSBjbGljayovXHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywnLnNsaWRlci1pbWcgLnNsaWRlci1pdGVtJyxmdW5jdGlvbigpe1xyXG4gICAgICAgIGxldCB1cmxJbWFnZSA9ICQodGhpcykuZmluZCgnaW1nJykuYXR0cignc3JjJyk7XHJcbiAgICAgICAgJCgnLnZpZXctYmxvY2staW1nJykuZmluZCgnaW1nJykuYXR0cignc3JjJyx1cmxJbWFnZSk7XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIEdvIHRvIHRoZSBuZXh0IGl0ZW1cclxuICAgICQoJy5idG5OYXYtbmV4dCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG93bC50cmlnZ2VyKCduZXh0Lm93bC5jYXJvdXNlbCcpO1xyXG4gICAgfSlcclxuICAgIC8vIEdvIHRvIHRoZSBwcmV2aW91cyBpdGVtXHJcbiAgICAkKCcuYnRuTmF2LXByZXYnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBXaXRoIG9wdGlvbmFsIHNwZWVkIHBhcmFtZXRlclxyXG4gICAgICAgIC8vIFBhcmFtZXRlcnMgaGFzIHRvIGJlIGluIHNxdWFyZSBicmFja2V0ICdbXSdcclxuICAgICAgICBvd2wudHJpZ2dlcigncHJldi5vd2wuY2Fyb3VzZWwnLCBbMzAwXSk7XHJcbiAgICB9KVxyXG5cclxuICAgIC8qSW5pdGlhbGlzYXRpb24gb3dsIGNhcm91c2VsIGFsZXJ0Ki9cclxuICAgIHZhciBvd2wyID0gJCgnLmFsZXJ0LXNsaWRlcicpLm93bENhcm91c2VsKHtcclxuXHRcdG1vdXNlRHJhZzogdHJ1ZSxcclxuXHRcdGF1dG9wbGF5OiBmYWxzZSxcclxuXHRcdG1hcmdpbjogMCxcclxuICAgICAgICBuYXY6IHRydWUsXHJcblx0XHRhbmltYXRlSW46ICdmYWRlSW5SaWdodCcsICAgLy8gPC0tIGNsYXNzIGluIGFuaW1hdGUgQ1NTXHJcbiAgICAgICAgYW5pbWF0ZU91dDogJ2ZhZGVPdXRMZWZ0JywgIC8vIDwtLSBjbGFzcyBpbiBhbmltYXRlIENTU1xyXG4gICAgICAgIG5hdkNvbnRhaW5lcjogJy5uYXZDdXN0b20nLFxyXG4gICAgICAgIG5hdlRleHQ6IFskKCcubnYtcHJldicpLCQoJy5udi1uZXh0JyldLFxyXG5cdFx0YXV0b1dpZHRoOnRydWUsXHJcblx0XHRhdXRvSGVpZ2h0OnRydWUsXHJcbiAgICAgICAgaXRlbXM6MSxcclxuXHRcdHNsaWRlVHJhbnNpdGlvbjogJ2N1YmljLWJlemllcigwLjIxNSwgMC42MSwgMC4zNTUsIDEpJyxcclxuXHRcdGF1dG9wbGF5VGltZW91dDo0MDAwLFxyXG5cdFx0YXV0b3BsYXlIb3ZlclBhdXNlOnRydWUsXHJcbiAgICAgICAgZG90czpmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gR28gdG8gdGhlIG5leHQgaXRlbVxyXG5cdCQoJy5udi1wcmV2JykuY2xpY2soZnVuY3Rpb24oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0b3dsMi50cmlnZ2VyKCduZXh0Lm93bC5jYXJvdXNlbCcpO1xyXG5cdFx0Ly8gcmV0dXJuIGZhbHNlO1xyXG5cdH0pO1xyXG5cclxuICAgIC8qQWRkaXRpb25hbCBzY3JpcHQgSlMgdG9nZ2xlIGNvbmRpdGlvbiBzbGlkZXIgaW1hZ2UqL1xyXG4gICAgaWYoJCgnLnNsaWRlci1pbWcnKS5maW5kKCcub3dsLWl0ZW0nKS5sZW5ndGggPT09MSl7XHJcbiAgICAgICAgJCgnLnNsaWRlci1pbWctY29udGFpbmVyJykuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZigkKCcuc2xpZGVyLWltZycpLmZpbmQoJy5vd2wtaXRlbScpLmxlbmd0aCA+IDEgJiYgJCgnLnNsaWRlci1pbWcnKS5maW5kKCcub3dsLWl0ZW0nKS5sZW5ndGggPCA2KXtcclxuICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiAxNDQwcHgpXCIpLm1hdGNoZXMpIHtcclxuICAgICAgICAgICAgJCgnLmJ1dHRvbi1ibG9jaycpLnNob3coKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgJCgnLmJ1dHRvbi1ibG9jaycpLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLypHZXN0aW9uIG1hbmFnZSByZXNpemUgZXZlbnQqL1xyXG4gICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiAxNDQwcHgpXCIpLm1hdGNoZXMpIHtcclxuICAgICAgICAgICAgLyogTGEgbGFyZ2V1ciBtYXhpbWFsZSBkZSBsJ2FmZmljaGFnZSBlc3QgMTQ0MCBweCBpbmNsdXMgKi9cclxuICAgICAgICAgICAgaWYoJCgnLnNsaWRlci1pbWcnKS5maW5kKCcub3dsLWl0ZW0nKS5sZW5ndGggPT09MSl7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2xpZGVyLWltZy1jb250YWluZXInKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZigkKCcuc2xpZGVyLWltZycpLmZpbmQoJy5vd2wtaXRlbScpLmxlbmd0aCA+IDEgJiYgJCgnLnNsaWRlci1pbWcnKS5maW5kKCcub3dsLWl0ZW0nKS5sZW5ndGggPCA2KXtcclxuICAgICAgICAgICAgICAgICQoJy5idXR0b24tYmxvY2snKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvKiBMJ2FmZmljaGFnZSBlc3Qgc3Vww6lyaWV1ciDDoCAxNDQwcHggZGUgbGFyZ2UgKi9cclxuICAgICAgICAgICAgaWYoJCgnLnNsaWRlci1pbWcnKS5maW5kKCcub3dsLWl0ZW0nKS5sZW5ndGggPT09MSl7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2xpZGVyLWltZy1jb250YWluZXInKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZigkKCcuc2xpZGVyLWltZycpLmZpbmQoJy5vd2wtaXRlbScpLmxlbmd0aCA+IDEgJiYgJCgnLnNsaWRlci1pbWcnKS5maW5kKCcub3dsLWl0ZW0nKS5sZW5ndGggPCA2KXtcclxuICAgICAgICAgICAgICAgICQoJy5idXR0b24tYmxvY2snKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHRcdFxyXG5cdC8vIEdvIHRvIHRoZSBwcmV2aW91cyBpdGVtXHJcblx0JCgnLm52LW5leHQnKS5jbGljayhmdW5jdGlvbihlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRvd2wyLnRyaWdnZXIoJ3ByZXYub3dsLmNhcm91c2VsJywgWzMwMF0pO1xyXG5cdFx0Ly8gcmV0dXJuIGZhbHNlO1xyXG5cdH0pO1xyXG59KTtcbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCl7XHJcblxyXG4gICAgLypEcm9wZG93biBmaWx0ZXIgZXZlbnQgYnRuLWZpbHRlciovXHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywnLmJ0bi1maWx0ZXInLGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICQoJy5kcm9wZG93bi1tZW51LWZpbHRlcicpLm5vdCgkKHRoaXMpLm5leHQoKSkuZmFkZU91dCgyMDApO1xyXG4gICAgICAgICQodGhpcykubmV4dCgpLmZhZGVUb2dnbGUoMjAwKTtcclxuICAgIH0pO1xyXG4gICAgICBcclxufSk7XG52YXIgbG9ja0RlbGV0ZUZhdm9yaXMgPSBmYWxzZTtcclxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoJCkge1xyXG4gICAgLypldmVudCBib3V0b24gc3VwcHIgZmF2b3JpcyBzaSBwYXMgYWpvdXTDqSBkYW5zIGJvaXRlIMOgIG91dGlscyovXHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy52aWduZXR0ZS1pdGVtIC5idG4tZGVsZXRlLWZhdm9yaXMnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBsZXQgZGVsZXRlSWQgPSAkKHRoaXMpLmRhdGEoJ2RlbGV0ZScpO1xyXG4gICAgICAgIGxldCBpc0luVG9vbGJveCA9ICQoJyNidG4tYWRkLXRvb2wtJyArIGRlbGV0ZUlkKTtcclxuXHJcbiAgICAgICAgaWYgKGlzSW5Ub29sYm94Lmhhc0NsYXNzKCdhY3RpdmUnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAvL1NpIGFqb3V0w6kgZGFucyBsYSBib2l0ZSDDoCBvdXRpbHNcclxuICAgICAgICAgICAgJCgnLnBvcHBpbi1hbm51bGF0aW9uLWZhdm9yaXMtdG9vbCcpLmZhZGVJbig0MDApO1xyXG4gICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5wb3BwaW4tYW5udWxhdGlvbi1mYXZvcmlzLXRvb2wnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2QgOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsIDogc2V0dGluZ3MuYWpheFVybCxcclxuICAgICAgICAgICAgICAgICAgICBhc3luYyA6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uIDogJ2JkY19kZWxldGVfZmF2b3JpcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZV9pZCA6IGRlbGV0ZUlkXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZSA6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZSA6IGZhbHNlLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzIDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbHVzMiA9IChyZXNwb25zZS5sZW5ndGggPiA1KSA/ICcrJyA6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsMiA9IChyZXNwb25zZS5sZW5ndGggPiA1KSA/ICdBZmZpY2hlciB0b3V0JyA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm5vdGlmLWJ1dHRvbi1mYXZvcmlzJykuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubm90aWYtYnV0dG9uLWZhdm9yaXMnKS5odG1sKCc8aSBjbGFzcz1cImljb24gaWNvLWhlYXJ0XCI+PC9pPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubm90aWYtbnVtYmVyLWZhdm9yaXMnKS5odG1sKHJlc3BvbnNlLmxlbmd0aCArIHBsdXMyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm5vdGlmLW51bWJlci1wbHVzJykuaHRtbCgnKCcgKyByZXNwb25zZS5sZW5ndGggKyBwbHVzMiArICcpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5saW5rLWFsbC1ub3RpZi1mYXZvcmlzJykuaHRtbChhbGwyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL1NpIHBhcyBham91dMOpIGRhbnMgbGEgYm9pdGUgw6Agb3V0aWxzXHJcbiAgICAgICAgICAgICQoJy5wb3BwaW4tYW5udWxhdGlvbi1mYXZvcmlzJykuZmFkZUluKDQwMCk7XHJcblxyXG4gICAgICAgICAgICAkKCcuYnRuLXN1Y2Nlc3MtZGVsZXRlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLm5vdGlmLW51bWJlci1mYXZvcmlzJykuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcubm90aWYtbnVtYmVyLXBsdXMnKS5odG1sKCcnKTtcclxuICAgICAgICAgICAgICAgICQoJy5saW5rLWFsbC1ub3RpZi1mYXZvcmlzJykuaHRtbCgnJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2QgOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsIDogc2V0dGluZ3MuYWpheFVybCxcclxuICAgICAgICAgICAgICAgICAgICBhc3luYyA6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uIDogJ2JkY19kZWxldGVfZmF2b3JpcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZV9pZCA6IGRlbGV0ZUlkXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZSA6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZSA6IGZhbHNlLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzIDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsdXMyID0gKHJlc3BvbnNlLmxlbmd0aCA+IDUpID8gJysnIDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwyID0gKHJlc3BvbnNlLmxlbmd0aCA+IDUpID8gJ0FmZmljaGVyIHRvdXQnIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubm90aWYtYnV0dG9uLWZhdm9yaXMnKS5odG1sKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5ub3RpZi1idXR0b24tZmF2b3JpcycpLmh0bWwoJzxpIGNsYXNzPVwiaWNvbiBpY28taGVhcnRcIj48L2k+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5ub3RpZi1udW1iZXItZmF2b3JpcycpLmh0bWwocmVzcG9uc2UubGVuZ3RoICsgcGx1czIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubm90aWYtbnVtYmVyLXBsdXMnKS5odG1sKCcoJyArIHJlc3BvbnNlLmxlbmd0aCArIHBsdXMyICsgJyknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmxpbmstYWxsLW5vdGlmLWZhdm9yaXMnKS5odG1sKGFsbDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBlcnJvciA6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJCgnLmJ0bi1hbm51bGVyLWRlbGV0ZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLypCdXR0b24gY2xvc2UgcG9wcGluKi9cclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLmJ1dHRvbi1jbG9zZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5wb3BwaW4tb3ZlcmxheScpLmZhZGVPdXQoNDAwKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5idG4tYW5udWxlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5wb3BwaW4tb3ZlcmxheScpLmZhZGVPdXQoNDAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnLnBvcHBpbi1vdmVybGF5JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuZmFkZU91dCg0MDApO1xyXG4gICAgfSk7XHJcblxyXG5cclxufSk7XHJcblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigkKXtcclxuICAgIC8qU2NyaXB0IEpzIHBsYXkgdG9vZ2xlIGJ1dHRvbiB2aWRlbyBzaG93Ki9cclxuICAgIC8qY29uc3QgdmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwidmlkZW9cIik7XHJcbiAgICBjb25zdCBjaXJjbGVQbGF5QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG4tc3RhcnQtdmlkZW9cIik7XHJcblxyXG4gICAgZnVuY3Rpb24gdG9nZ2xlUGxheSgpIHtcclxuICAgICAgICBpZiAodmlkZW8ucGF1c2VkIHx8IHZpZGVvLmVuZGVkKSB7XHJcbiAgICAgICAgICAgIHZpZGVvLnBsYXkoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2aWRlby5wYXVzZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2lyY2xlUGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG9nZ2xlUGxheSgpKTtcclxuICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJwbGF5aW5nXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjaXJjbGVQbGF5QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAwO1xyXG4gICAgfSk7XHJcbiAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKFwicGF1c2VcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNpcmNsZVBsYXlCdXR0b24uc3R5bGUub3BhY2l0eSA9IDE7XHJcbiAgICB9KTsqL1xyXG4gICAgaWYgKCAkKFwiLnZpZGVvLXN0YW5kYXJkXCIpLmxlbmd0aCA+IDAgKXtcclxuICAgICAgICAkKFwiLnZpZGVvLXN0YW5kYXJkXCIpLmdldCgwKS5wYXVzZSgpO1xyXG4gICAgICAgICQoJy52aWRlby1zdGFuZGFyZCcpLmF0dHIoJ2NvbnRyb2xzJyx0cnVlKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLypldmVudCBjbGljayBidXR0b24gY3VzdG9tIHBsYXkqL1xyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsJy5idG4tc3RhcnQtdmlkZW8nLGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLmZhZGVUb2dnbGUoMTAwKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy52aWRlb0Jsb2NrJykuZmluZCgnLnZpZGVvLXN0YW5kYXJkJykudHJpZ2dlcigncGxheScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLypCaW5kIFBsYXkgdmlkZW8qL1xyXG4gICAgaWYgKCAkKFwiLnZpZGVvLXN0YW5kYXJkXCIpLmxlbmd0aCA+IDAgKXtcclxuICAgICAgICAkKCcudmlkZW8tc3RhbmRhcmQnKS5iaW5kKCdwbGF5JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLmZhZGVPdXQoMjAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLypCaW5kIFBhdXNlIHZpZGVvKi9cclxuICAgIGlmICggJChcIi52aWRlby1zdGFuZGFyZFwiKS5sZW5ndGggPiAwICl7XHJcbiAgICAgICAgJCgnLnZpZGVvLXN0YW5kYXJkJykuYmluZCgncGF1c2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCkuZmFkZUluKDIwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59KTsiXX0=
